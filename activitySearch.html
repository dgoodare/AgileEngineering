<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <!-- required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!--import bootstrap css-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="css/master.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet"> 

  <!-- favicon-->
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">

  <!-- link to manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- webpage title -->
  <title>𝕾𝖚𝖘𝖙𝖆𝖎𝖓𝖆𝖇𝖑𝖊 𝕯𝖚𝖓𝖉𝖊𝖊</title>
  <!--<title>☼ 😂😂😂😂😂😂 ☼</title>-->
</head>

<body>
  <div class="pageheight">
    <!-- header containing the navigation bar -->
    <header>
      <!-- navigation bar containing a logo, title and a link to each page -->
      <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark">
        <span class="navbar-brand">
          <img src="assets/susDundee1.png" alt="" width="40" height="40">
        </span>
        <span class="navbar-brand">Sustainable Dundee</span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="goals.html">Goals</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="events.html">Events</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="activitySearch.html">Search for an Activity</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="createActivity.html">Add a new Activity</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="editActivity.html">Edit an existing Activty</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- (main class containg Lorem ipsum to be replaced)-->
    <main class="container">
      <h1>Home</h1>
	  <br>
	  <h2>Search for an existing activity</h2>
	  <h3>This page is restricted to authoried users only. Unauthorised access will be logged</h3>
	  <br>
	   <br>
	    <br>

      <!-- Slideshow container -->
      <div class="search-container">

       <div id='searchbar'>
            <form action="" method="GET">
                <input id="search-input" type="text" size="46" placeholder="Enter the ID or Title of an activity you would like to view">
                <button id="search-button" type="button" onclick="activitySearch()">Search</button>
            </form>
        </div>

        <script>
                //function that will search for activities
                function activitySearch()
                {
                    var searchTerm = document.getElementById("search-input").value;
                    //check that it isn't empty
                    if (searchTerm == "")
                    {
                        document.getElementById("searchResults").innerHTML = "No results, please enter another ID or Title";
                        return;
                    }
                    else
                    {
                        //create new XML request
                        var xmlhttp = new XMLHttpRequest();
                        xmlhttp.onreadystatechange = function ()
                        {
                            if (this.readyState == 4 && this.status == 200) 
                            {
                                //display response text
                                document.getElementById("searchResults").innerHTML = this.responseText;
                                //display editing form
                                document.getElementById("editForm").style.display = "block";
                            }
                        };
                        //** The address on the next line of code is NOT CORRECT */
                        xmlhttp.open("GET","https://ac31007.azurewebsites.net/api/activitySearch?searchInput="+searchTerm, true);
                        xmlhttp.send();
                    }
                }
            </script>

            <div id="searchresults">
                <!-- output from search will appear here -->
            </div>

       
      </main>
    </div>
  </div>

  <!--import bootstrap JavaScript (needs to be moved to separtate JS file)-->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<footer class="container-fluid">
  <div class="row">
    <p class="col-8 my-auto">Terms and conditions: be sustainable in Dundee.</p>
    <p class="col-4 text-right my-auto">© Sustainable Dundee</p>
  </div>
</footer>
</body>
</html>